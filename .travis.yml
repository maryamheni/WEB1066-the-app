dist: trusty
language: java
jdk: oraclejdk8
sudo: required	
services:
    - docker
env:
    global:
        - secure: RA8kLNJtvTjQtRnwL-4KQg
before_install:
    - sudo apt-get update
    - sudo apt-get -y install libxml2-dev
before_script:
    - travis encrypt DOCKER_PASSWORD=password --add env.global -â€”com
stages:
    - build
    - test
    - deploy
jobs:
    include:
      - stage: build
        name : build
        script:
            - ./gradlew clean jar 
      - stage: test
        name: test
        script:
            - ./gradlew test
        after_success:
            - ./gradlew jacocoTestReport	    
            - find . -name jacocoTestReport.csv|xargs cat|awk -F',' '{print $3" "$4" "$5}'	    
            - ./gradlew jacocoTestCoverageVerification
      - stage: deploy
        provider: script
        script: echo 'WIP'
        on:
            all_branches: true

